<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>变者</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="变者">
<meta property="og:url" content="https://github.com/zccccccc/index.html">
<meta property="og:site_name" content="变者">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="变者">
  
    <link rel="alternate" href="/atom.xml" title="变者" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">变者</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/zccccccc"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="clean-blog-设计模式-状态模式" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/26/设计模式-状态模式/" class="article-date">
  <time datetime="2017-04-26T01:18:15.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/26/设计模式-状态模式/">设计模式-状态模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="状态模式-允许对象在内部状态改变时改变它的行为-对象看起来好羞修改了它的类。-当一个对象的行为取决于它的状态时，并且它必须在运行时刻根据状态改变它的行为时就可以考虑用状态模式"><a href="#状态模式-允许对象在内部状态改变时改变它的行为-对象看起来好羞修改了它的类。-当一个对象的行为取决于它的状态时，并且它必须在运行时刻根据状态改变它的行为时就可以考虑用状态模式" class="headerlink" title="状态模式: 允许对象在内部状态改变时改变它的行为,对象看起来好羞修改了它的类。 当一个对象的行为取决于它的状态时，并且它必须在运行时刻根据状态改变它的行为时就可以考虑用状态模式"></a>状态模式: 允许对象在内部状态改变时改变它的行为,对象看起来好羞修改了它的类。 当一个对象的行为取决于它的状态时，并且它必须在运行时刻根据状态改变它的行为时就可以考虑用状态模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 状态模式: 允许对象在内部状态改变时改变它的行为,对象看起来好羞修改了它的类 (解决大量if else 重复操作)</div><div class="line"> * 当一个对象的行为取决于它的状态时，并且它必须在运行时刻根据状态改变它的行为时就可以考虑用状态模式</div><div class="line"> * * 状态模式允许一个对象基于内部状态而拥有不同的行为</div><div class="line"> * * 和程序状态机不同,状态模式用类代表状态</div><div class="line"> * * Context会将行为委托给当前状态对象</div><div class="line"> * * 通过将每个状态封装进一个类,我们把以后需要的任何改变局部化</div><div class="line"> * * 状态模式允许Context随着状态的改变而改变行为</div><div class="line"> * * 状态转行可以由State类或Context类控制</div><div class="line"> * * 使用状态模式通常会导致设计类数目大量增加</div><div class="line"> * * 状态模式可以被多个Context实例共享</div><div class="line"> * &lt;p&gt;</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 模拟程序:</div><div class="line"> * 用户登陆页面 ,登陆操作,获取资源,获取角色</div><div class="line"> * 其实比较类似 责任链模式</div><div class="line"> */</div><div class="line">public class StatePattern &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line">        Context context = new Context();</div><div class="line">//        context.Login();</div><div class="line">//        context.GetRolePermission();</div><div class="line"></div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">//        context.LoginPage();</div><div class="line">        context.LoginPage();</div><div class="line">        context.Login();</div><div class="line">        context.GetRolePermission();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">class Context &#123;</div><div class="line"></div><div class="line">    State loginPageState;</div><div class="line">    State loginState;</div><div class="line">    State permissionState;</div><div class="line"></div><div class="line">    private State state = loginPageState;</div><div class="line"></div><div class="line">    public void setState(State state) &#123;</div><div class="line">        this.state = state;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public State getPermissionState() &#123;</div><div class="line">        return permissionState;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public State getLoginState() &#123;</div><div class="line">        return loginState;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public State getLoginPageState() &#123;</div><div class="line">        return loginPageState;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Context() &#123;</div><div class="line">        loginPageState = new LoginPageState(this);</div><div class="line">        loginState = new LoginState(this);</div><div class="line">        permissionState = new RolePermissionState(this);</div><div class="line"></div><div class="line">        state = loginPageState;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void LoginPage() &#123;</div><div class="line">        state.LoginPage();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void Login() &#123;</div><div class="line">        state.UserLogin();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void GetRolePermission() &#123;</div><div class="line">        state.GetRolePermission();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">class LoginState implements State &#123;</div><div class="line"></div><div class="line">    Context context;</div><div class="line"></div><div class="line">    public LoginState(Context context) &#123;</div><div class="line">        this.context = context;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void GetRolePermission() &#123;</div><div class="line">        System.out.println(&quot;用户为登陆,请先登录&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void LoginPage() &#123;</div><div class="line">        System.out.println(&quot;用户正在登陆请求&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void UserLogin() &#123;</div><div class="line">        System.out.println(&quot;正在登陆.........&quot;);</div><div class="line">        context.setState(context.getPermissionState());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class LoginPageState implements State &#123;</div><div class="line"></div><div class="line">    Context context;</div><div class="line"></div><div class="line">    public LoginPageState(Context context) &#123;</div><div class="line">        this.context = context;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void GetRolePermission() &#123;</div><div class="line">        System.out.println(&quot;用户为登陆,请先登录&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void LoginPage() &#123;</div><div class="line">        System.out.println(&quot;用户在登陆页面&quot;);</div><div class="line">        context.setState(context.getLoginState());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void UserLogin() &#123;</div><div class="line">        System.out.println(&quot;只允许在登陆页面提交请求&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//登陆成功后获取资源</div><div class="line">class RolePermissionState implements State &#123;</div><div class="line"></div><div class="line">    Context context;</div><div class="line"></div><div class="line">    public RolePermissionState(Context context) &#123;</div><div class="line">        this.context = context;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void GetRolePermission() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;获取资源完成,用户回到登陆页面&quot;);</div><div class="line">        context.setState(context.getLoginPageState());</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void LoginPage() &#123;</div><div class="line">        System.out.println(&quot;用户已经登陆&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void UserLogin() &#123;</div><div class="line">        System.out.println(&quot;只允许在登陆页面提交请求&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface State &#123;</div><div class="line"></div><div class="line">    default void LoginPage() &#123;</div><div class="line">        System.out.println(&quot;用户登陆页面&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    default void UserLogin() &#123;</div><div class="line">        System.out.println(&quot;用户登陆&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    default void GetRolePermission() &#123;</div><div class="line">        System.out.println(&quot;用户登陆获取资源&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/04/26/设计模式-状态模式/" data-id="cj1yap0qj000a045rw2t3wcal" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式迭代器－不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/29/设计模式迭代器－不解释/" class="article-date">
  <time datetime="2017-03-29T02:09:26.000Z" itemprop="datePublished">2017-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/29/设计模式迭代器－不解释/">设计模式迭代器－不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="迭代器模式-提供一种方法顺序访问一个聚合对象中的各个元素-而又不暴露其内部表示"><a href="#迭代器模式-提供一种方法顺序访问一个聚合对象中的各个元素-而又不暴露其内部表示" class="headerlink" title="迭代器模式: 提供一种方法顺序访问一个聚合对象中的各个元素,而又不暴露其内部表示"></a>迭代器模式: 提供一种方法顺序访问一个聚合对象中的各个元素,而又不暴露其内部表示</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/**</div><div class="line"> * 迭代器模式: 提供一种方法顺序访问一个聚合对象中的各个元素,而又不暴露其内部表示</div><div class="line"> *</div><div class="line"> *</div><div class="line"> * 要点:</div><div class="line"> * 1.迭代器允许访问聚合的元素,而不需要暴露它的内部结构(存储方式)</div><div class="line"> * 2.迭代器将遍历聚合的工作封装进一个对象中</div><div class="line"> * 3.当使用迭代器的时候,我们依赖聚合提供遍历</div><div class="line"> * 4.迭代器提供一个通用的接口,让我们遍历聚合的项,当我们编码使用聚合项时,就可以使用多态机制</div><div class="line"> * 5.我们应该努力让一个类只分配一个责任</div><div class="line"> * 6.组合模式提供一个结构,可同时包容个别对象和组合对象</div><div class="line"> * 7.组合模式允许客户对个别对象以及组合对象一视同仁</div><div class="line"> * 8.组合结构内的任意对象称为组件,组件可以是组合,也可以是叶节点</div><div class="line"> * 9.在实现组合模式时,有许多设计上的折衷,你要根据需要平横透明性和安全性</div><div class="line"> *</div><div class="line"> * 如: 数据模型统一,但是实现存储方式不一样,</div><div class="line"> * 这时候我们要便利集合内的对象实现起来代码重复会比较多</div><div class="line"> * 下面我们一起来搞个迭代器来简化代码</div><div class="line"> */</div><div class="line">public class IteratorPattern &#123;</div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line"></div><div class="line">        MenuItemIterator userCenterMenu = new UserCenterMenu();</div><div class="line">        MenuItemIterator tradeMenu = new TradeMenu();</div><div class="line"></div><div class="line">        Client client = new Client(tradeMenu, userCenterMenu);</div><div class="line">        client.printlnMenu();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">interface MenuItemIterator &#123;</div><div class="line">    Iterator createIterator();</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface Iterator &#123;</div><div class="line"></div><div class="line">    boolean hasNext();</div><div class="line"></div><div class="line">    Object next();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//客户调用使用</div><div class="line">// ===&gt;   存在问题: 每一次添加新的模块后,客户端都要修改代码,</div><div class="line">//      还有如果系统中再有子系统,当前代码是解决不了的, 我们使用了另外一种模式 组合模式</div><div class="line">class Client &#123;</div><div class="line"></div><div class="line">    MenuItemIterator tradeMenu;</div><div class="line">    MenuItemIterator userCenterMenu;</div><div class="line"></div><div class="line">    public Client(MenuItemIterator tradeMenu, MenuItemIterator userCenterMenu) &#123;</div><div class="line">        this.tradeMenu = tradeMenu;</div><div class="line">        this.userCenterMenu = userCenterMenu;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void printlnMenu() &#123;</div><div class="line"></div><div class="line">        Iterator u = userCenterMenu.createIterator();</div><div class="line">        Iterator t = tradeMenu.createIterator();</div><div class="line">        printMenu(u);</div><div class="line">        printMenu(t);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void printMenu(Iterator iterator) &#123;</div><div class="line">        while (iterator.hasNext()) &#123;</div><div class="line">            MenuItem menuItem = (MenuItem) iterator.next();</div><div class="line">            System.out.println(menuItem.toString());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//用户系统菜单 - 数组实现</div><div class="line">class UserCenterMenu implements MenuItemIterator &#123;</div><div class="line"></div><div class="line">    static final int MAX_ITEMS = 3;</div><div class="line">    MenuItem[] menuItems;</div><div class="line">    int numberOfItems = 0;</div><div class="line"></div><div class="line"></div><div class="line">    public UserCenterMenu() &#123;</div><div class="line">        menuItems = new MenuItem[MAX_ITEMS];</div><div class="line">        addItem(&quot;1&quot;, &quot;用户注册&quot;, &quot;USER_REG&quot;, &quot;0&quot;);</div><div class="line">        addItem(&quot;2&quot;, &quot;用户新增&quot;, &quot;USER_ADD&quot;, &quot;0&quot;);</div><div class="line">        addItem(&quot;3&quot;, &quot;用户删除&quot;, &quot;USER_DELETE&quot;, &quot;0&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void addItem(String id, String name, String code, String paterId) &#123;</div><div class="line"></div><div class="line">        MenuItem menuItem = new MenuItem(id, name, code, paterId);</div><div class="line">        if (numberOfItems &gt;= MAX_ITEMS) &#123;</div><div class="line">            System.err.println(&quot;操作异常:数组下标越界&quot;);</div><div class="line">        &#125; else &#123;</div><div class="line">            menuItems[numberOfItems] = menuItem;</div><div class="line">            ++numberOfItems;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Deprecated</div><div class="line">    public MenuItem[] getMenuItems() &#123;</div><div class="line">        return menuItems;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public Iterator createIterator() &#123;</div><div class="line">        return new UserCenterMenuIterator(menuItems);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//用户系统菜单迭代</div><div class="line">class UserCenterMenuIterator implements Iterator &#123;</div><div class="line"></div><div class="line">    MenuItem[] items;</div><div class="line">    int position = 0;</div><div class="line"></div><div class="line">    public UserCenterMenuIterator(MenuItem[] items) &#123;</div><div class="line">        this.items = items;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean hasNext() &#123;</div><div class="line"></div><div class="line">        if (position &gt;= items.length || items[position] == null) &#123;</div><div class="line">            return false;</div><div class="line">        &#125; else &#123;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public Object next() &#123;</div><div class="line">        MenuItem menuItem = items[position];</div><div class="line">        ++position;</div><div class="line"></div><div class="line">        return menuItem;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//交易系统菜单 - List实现</div><div class="line">class TradeMenu implements MenuItemIterator &#123;</div><div class="line"></div><div class="line">    ArrayList&lt;MenuItem&gt; menuItems;</div><div class="line"></div><div class="line">    public TradeMenu() &#123;</div><div class="line">        menuItems = new ArrayList&lt;&gt;();</div><div class="line">        addItem(&quot;1&quot;, &quot;订单查看&quot;, &quot;TRADE_SEL&quot;, &quot;0&quot;);</div><div class="line">        addItem(&quot;2&quot;, &quot;订单处理&quot;, &quot;TRADE_OPE&quot;, &quot;0&quot;);</div><div class="line">        addItem(&quot;3&quot;, &quot;订单删除&quot;, &quot;TRADE_DEL&quot;, &quot;0&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void addItem(String id, String name, String code, String paterId) &#123;</div><div class="line">        MenuItem menuItem = new MenuItem(id, name, code, paterId);</div><div class="line">        menuItems.add(menuItem);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Deprecated</div><div class="line">    public ArrayList getMenuItems() &#123;</div><div class="line">        return menuItems;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public Iterator createIterator() &#123;</div><div class="line">        return new TradeMenuIterator(menuItems);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private class TradeMenuIterator implements Iterator &#123;</div><div class="line"></div><div class="line">        ArrayList&lt;MenuItem&gt; items;</div><div class="line">        int position = 0;</div><div class="line"></div><div class="line">        public TradeMenuIterator(ArrayList&lt;MenuItem&gt; items) &#123;</div><div class="line">            this.items = items;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public boolean hasNext() &#123;</div><div class="line"></div><div class="line">            if (position &gt;= items.size()) &#123;</div><div class="line">                return false;</div><div class="line">            &#125; else &#123;</div><div class="line">                return true;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public Object next() &#123;</div><div class="line">            MenuItem menuItem = items.get(position);</div><div class="line">            ++position;</div><div class="line">            return menuItem;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">class MenuItem &#123;</div><div class="line"></div><div class="line">    public MenuItem(String code, String id, String name, String paterId) &#123;</div><div class="line">        this.code = code;</div><div class="line">        this.id = id;</div><div class="line">        this.name = name;</div><div class="line">        this.paterId = paterId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private String id;</div><div class="line">    private String name;</div><div class="line">    private String code;</div><div class="line">    private String paterId;</div><div class="line"></div><div class="line"></div><div class="line">    public String getCode() &#123;</div><div class="line">        return code;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getId() &#123;</div><div class="line">        return id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getName() &#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line">    public String getPaterId() &#123;</div><div class="line">        return paterId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return &quot;MenuItem&#123;&quot; +</div><div class="line">                &quot;code=&apos;&quot; + code + &apos;\&apos;&apos; +</div><div class="line">                &quot;, id=&apos;&quot; + id + &apos;\&apos;&apos; +</div><div class="line">                &quot;, name=&apos;&quot; + name + &apos;\&apos;&apos; +</div><div class="line">                &quot;, paterId=&apos;&quot; + paterId + &apos;\&apos;&apos; +</div><div class="line">                &apos;&#125;&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/29/设计模式迭代器－不解释/" data-id="cj1yap0r3000y045rqvy57wvq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式组合－不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/29/设计模式组合－不解释/" class="article-date">
  <time datetime="2017-03-29T02:09:26.000Z" itemprop="datePublished">2017-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/29/设计模式组合－不解释/">设计模式组合－不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="组合模式-允许你将对象组合成树形结构来表现-“整体-部分”-层次结构-组合能让客户以一致的方式处理个别对象以及对象组合"><a href="#组合模式-允许你将对象组合成树形结构来表现-“整体-部分”-层次结构-组合能让客户以一致的方式处理个别对象以及对象组合" class="headerlink" title="组合模式 允许你将对象组合成树形结构来表现 “整体/部分” 层次结构, 组合能让客户以一致的方式处理个别对象以及对象组合"></a>组合模式 允许你将对象组合成树形结构来表现 “整体/部分” 层次结构, 组合能让客户以一致的方式处理个别对象以及对象组合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * ***当前例子为解决 迭代器模式中出现的问题***</div><div class="line"> * 建议先看 迭代器模式</div><div class="line"> * 组合模式:   允许你将对象组合成树形结构来表现 &quot;整体/部分&quot; 层次结构,</div><div class="line"> *       组合能让客户以一致的方式处理个别对象以及对象组合</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 当前实现方式: 就是将迭代器中的需要编码写入的 系统及菜单更换为 基于组合模式动态组织</div><div class="line"> *</div><div class="line"> * 要点:</div><div class="line"> * 1.迭代器允许访问聚合的元素,而不需要暴露它的内部结构(存储方式)</div><div class="line"> * 2.迭代器将遍历聚合的工作封装进一个对象中</div><div class="line"> * 3.当使用迭代器的时候,我们依赖聚合提供遍历</div><div class="line"> * 4.迭代器提供一个通用的接口,让我们遍历聚合的项,当我们编码使用聚合项时,就可以使用多态机制</div><div class="line"> * 5.我们应该努力让一个类只分配一个责任</div><div class="line"> * 6.组合模式提供一个结构,可同时包容个别对象和组合对象</div><div class="line"> * 7.组合模式允许客户对个别对象以及组合对象一视同仁</div><div class="line"> * 8.组合结构内的任意对象称为组件,组件可以是组合,也可以是叶节点</div><div class="line"> * 9.在实现组合模式时,有许多设计上的折衷,你要根据需要平横透明性和安全性</div><div class="line"> *</div><div class="line"> */</div><div class="line">public class CompositePattern &#123;</div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line"></div><div class="line">        CompositeSystemMenu userCenterMenu = new CompositeSystemMenu(&quot;用户系统&quot;, &quot;这是用户系统的菜单&quot;);</div><div class="line">        CompositeSystemMenu tradeMenu = new CompositeSystemMenu(&quot;交易系统&quot;, &quot;交易系统菜单&quot;);</div><div class="line"></div><div class="line"></div><div class="line">        userCenterMenu.add(</div><div class="line">                new CompositeMenuItem(&quot;1&quot;, &quot;用户注册&quot;, &quot;USER_REG&quot;, &quot;0&quot;),</div><div class="line">                new CompositeMenuItem(&quot;2&quot;, &quot;用户新增&quot;, &quot;USER_ADD&quot;, &quot;0&quot;),</div><div class="line">                new CompositeMenuItem(&quot;3&quot;, &quot;用户删除&quot;, &quot;USER_ADD&quot;, &quot;0&quot;));</div><div class="line"></div><div class="line">        tradeMenu.add(new CompositeMenuItem(&quot;1&quot;, &quot;订单查看&quot;, &quot;TRADE_SEL&quot;, &quot;0&quot;),</div><div class="line">                new CompositeMenuItem(&quot;1&quot;, &quot;订单处理&quot;, &quot;TRADE_OPE&quot;, &quot;0&quot;),</div><div class="line">                new CompositeMenuItem(&quot;1&quot;, &quot;订单删除&quot;, &quot;TRADE_DEL&quot;, &quot;0&quot;));</div><div class="line"></div><div class="line"></div><div class="line">        CompositeSystemMenu all = new CompositeSystemMenu(&quot;所有系统&quot;, &quot;所有系统的菜单&quot;);</div><div class="line">        all.add(userCenterMenu, tradeMenu);</div><div class="line"></div><div class="line">        CompositeClient compositeClient = new CompositeClient(all);</div><div class="line">        compositeClient.printMenu();</div><div class="line">        compositeClient.printAllMenu();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//客户端调用</div><div class="line"></div><div class="line">/**</div><div class="line"> * 对比迭代其客户端,发现组合模式的客户端非常简单</div><div class="line"> */</div><div class="line">class CompositeClient &#123;</div><div class="line"></div><div class="line">    MenuComponent allMenus;</div><div class="line"></div><div class="line">    public CompositeClient(MenuComponent allMenus) &#123;</div><div class="line">        this.allMenus = allMenus;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void printMenu() &#123;</div><div class="line">        allMenus.print();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void printAllMenu()&#123;</div><div class="line"></div><div class="line">        Iterator iterator = allMenus.createIterator();</div><div class="line">        while (iterator.hasNext())&#123;</div><div class="line">            MenuComponent menu = (MenuComponent)iterator.next();</div><div class="line">            try &#123;</div><div class="line">                menu.print();</div><div class="line">            &#125;catch (UnsupportedOperationException e)&#123;&#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 菜单组件抽象类</div><div class="line"> * 所有的组件都必须实现当前接口,然后,叶节点和组合节点的角色不同,</div><div class="line"> * 所以有些方法可能并不适合某种节点,面对这种情况,最好抛出运行时异常</div><div class="line"> */</div><div class="line">abstract class MenuComponent &#123;</div><div class="line"></div><div class="line">    public void add(MenuComponent... menuComponent) &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void remove(MenuComponent menuComponent) &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public MenuComponent getChild(int i) &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    public String getName() &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 描述</div><div class="line">     **/</div><div class="line">    public String getDescribe() &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getCode() &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getId() &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void print() &#123;</div><div class="line">        throw new UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    abstract java.util.Iterator createIterator();</div><div class="line">&#125;</div><div class="line"></div><div class="line">/***</div><div class="line"> * 系统菜单</div><div class="line"> */</div><div class="line">class CompositeSystemMenu extends MenuComponent &#123;</div><div class="line"></div><div class="line">    ArrayList menuComponents = new ArrayList();</div><div class="line">    String name;</div><div class="line">    String describe;</div><div class="line"></div><div class="line">    public CompositeSystemMenu(String name, String describe) &#123;</div><div class="line">        this.name = name;</div><div class="line">        this.describe = describe;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void add(MenuComponent... menuComponent) &#123;</div><div class="line"></div><div class="line">        for (MenuComponent m : menuComponent) &#123;</div><div class="line">            menuComponents.add(m);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void remove(MenuComponent menuComponent) &#123;</div><div class="line">        menuComponents.remove(menuComponent);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public MenuComponent getChild(int i) &#123;</div><div class="line">        return (MenuComponent) menuComponents.get(i);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void print() &#123;</div><div class="line">        System.out.println(this.toString());</div><div class="line">        java.util.Iterator iterator = menuComponents.iterator();</div><div class="line">        while (iterator.hasNext()) &#123;</div><div class="line">            MenuComponent menuComponent = (MenuComponent) iterator.next();</div><div class="line">            menuComponent.print();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getName() &#123;</div><div class="line">        return this.name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescribe() &#123;</div><div class="line">        return this.describe;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getId() &#123;</div><div class="line">        return super.getId();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getCode() &#123;</div><div class="line">        return super.getCode();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return &quot;SystemMenu&#123;&quot; +</div><div class="line">                &quot;, name=&apos;&quot; + name + &apos;\&apos;&apos; +</div><div class="line">                &quot;, describe=&apos;&quot; + describe + &apos;\&apos;&apos; +</div><div class="line">                &apos;&#125;&apos;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    Iterator createIterator() &#123;</div><div class="line">        return new CompositeSystemMenuIterator(menuComponents.iterator());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    class CompositeSystemMenuIterator implements java.util.Iterator&#123;</div><div class="line"></div><div class="line">        Stack stack = new Stack();</div><div class="line"></div><div class="line">        public CompositeSystemMenuIterator(Iterator iterator) &#123;</div><div class="line">           stack.push(iterator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public boolean hasNext() &#123;</div><div class="line"></div><div class="line">            if(stack.isEmpty())&#123;return false;&#125;</div><div class="line">            else&#123;</div><div class="line">                Iterator iterator = (Iterator)stack.peek();</div><div class="line"></div><div class="line">                if(!iterator.hasNext())&#123;</div><div class="line">                    stack.pop();</div><div class="line">                    return hasNext();</div><div class="line">                &#125;else &#123;</div><div class="line">                    return true;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public Object next() &#123;</div><div class="line">           if(hasNext())&#123;</div><div class="line"></div><div class="line">               Iterator iterator = (Iterator)stack.peek();</div><div class="line">               MenuComponent component = (MenuComponent)iterator.next();</div><div class="line"></div><div class="line">               if(component instanceof CompositeSystemMenu)&#123;</div><div class="line">                   stack.push(component.createIterator());</div><div class="line">               &#125;</div><div class="line">               return component;</div><div class="line">           &#125;else &#123;</div><div class="line">               return null;</div><div class="line">           &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void remove() &#123;</div><div class="line">         throw  new UnsupportedOperationException();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/***</div><div class="line"> * 菜单集合</div><div class="line"> */</div><div class="line">class CompositeMenuItem extends MenuComponent &#123;</div><div class="line"></div><div class="line">    public CompositeMenuItem(String code, String id, String name, String paterId) &#123;</div><div class="line">        this.code = code;</div><div class="line">        this.id = id;</div><div class="line">        this.name = name;</div><div class="line">        this.paterId = paterId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private String id;</div><div class="line">    private String name;</div><div class="line">    private String code;</div><div class="line">    private String paterId;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getCode() &#123;</div><div class="line">        return code;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getId() &#123;</div><div class="line">        return id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getName() &#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getPaterId() &#123;</div><div class="line">        return paterId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void print() &#123;</div><div class="line">        System.out.println(this.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return &quot;MenuItem&#123;&quot; +</div><div class="line">                &quot;code=&apos;&quot; + code + &apos;\&apos;&apos; +</div><div class="line">                &quot;, id=&apos;&quot; + id + &apos;\&apos;&apos; +</div><div class="line">                &quot;, name=&apos;&quot; + name + &apos;\&apos;&apos; +</div><div class="line">                &quot;, paterId=&apos;&quot; + paterId + &apos;\&apos;&apos; +</div><div class="line">                &apos;&#125;&apos;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    Iterator createIterator() &#123;</div><div class="line">        return new NullIterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    private class NullIterator implements java.util.Iterator&#123;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public boolean hasNext() &#123;</div><div class="line">            return false;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public Object next() &#123;</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void remove() &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/29/设计模式组合－不解释/" data-id="cj1yap0qx000s045rv3lhrkq0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式模版方法－不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/29/设计模式模版方法－不解释/" class="article-date">
  <time datetime="2017-03-29T02:09:09.000Z" itemprop="datePublished">2017-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/29/设计模式模版方法－不解释/">设计模式模版方法－不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="模版方法-在一个方法中定义一个算法的骨架-而将一些步骤延迟到子类中-模版方法使得子类可以在不改变算结构的情况下-重新定义算法中的某些步骤"><a href="#模版方法-在一个方法中定义一个算法的骨架-而将一些步骤延迟到子类中-模版方法使得子类可以在不改变算结构的情况下-重新定义算法中的某些步骤" class="headerlink" title="模版方法: 在一个方法中定义一个算法的骨架,而将一些步骤延迟到子类中,  模版方法使得子类可以在不改变算结构的情况下,重新定义算法中的某些步骤"></a>模版方法: 在一个方法中定义一个算法的骨架,而将一些步骤延迟到子类中,  模版方法使得子类可以在不改变算结构的情况下,重新定义算法中的某些步骤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line">/**</div><div class="line"> * 模版方法: 在一个方法中定义一个算法的骨架,而将一些步骤延迟到子类中,</div><div class="line"> * 模版方法使得子类可以在不改变算结构的情况下,重新定义算法中的某些步骤</div><div class="line"> * 要点:</div><div class="line"> * 1.模版方法定义类了算法的步骤,把这些步骤的实现延迟到子类</div><div class="line"> * 2.模版方法模式为我们提供类一种代码复用的重要技巧</div><div class="line"> * 3.模版方法的抽象类可以定义具体方法,抽象方法和钩子</div><div class="line"> * 4.抽象方法由子类实现</div><div class="line"> * 5.钩子一种法方法,它在抽象类中不做事情,或者只做默认的事情,子类可以选择是否需要覆盖</div><div class="line"> * 6.为了防止子类改变模版方法中的算法,可以将模版方法声明为final</div><div class="line"> * 7.好莱坞原则告诉我们,将决策权防盗高层模块中,以便绝的如何以及何时调用底层模块</div><div class="line"> * 8.你将在真实世界代码中看到模版方法模式的许多变体,不要期待它们都是一眼就可以被你认出</div><div class="line"> * 9.策略模式和模版方法模式都是封装算法,一个用组合(策略),一个是继承(模版)</div><div class="line"> * 10. 工厂方法是模版方法的一种特殊版本</div><div class="line"> * &lt;p&gt;</div><div class="line"> * 场景描述:</div><div class="line"> * 实现目的将具体实现延迟到子类实现</div><div class="line"> * 比如实现一个服务操作,每次执行要求 开,操作,提交(通过钩子判断),关闭,操作</div><div class="line"> */</div><div class="line">public class TemplatePattern &#123;</div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line"></div><div class="line">        Operation mysqlOperation = new MysqlOperation();</div><div class="line"></div><div class="line">        Operation fileOperation = new FileOperation();</div><div class="line"></div><div class="line">        mysqlOperation.start();</div><div class="line">        System.out.println(&quot;------------------------------------&quot;);</div><div class="line">        fileOperation.start();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//数据库操作</div><div class="line">class MysqlOperation extends Operation&#123;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    void operation() &#123;</div><div class="line">        System.out.println(&quot;操作数据库&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void open() &#123;</div><div class="line">        System.out.println(&quot;打开mysql数据库&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    boolean hook() &#123;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void commit() &#123;</div><div class="line">        System.out.println(&quot;数据提交&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void close() &#123;</div><div class="line">        System.out.println(&quot;关闭mysql数据库&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">class FileOperation extends Operation  &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void close() &#123;</div><div class="line">        System.out.println(&quot;关闭文件流&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void commit() &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    boolean hook() &#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void open() &#123;</div><div class="line">        System.out.println(&quot;打开文件流&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    void operation() &#123;</div><div class="line">        System.out.println(&quot;打开文件操作&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">abstract class Operation &#123;</div><div class="line"></div><div class="line">    //启动主程序</div><div class="line">    final void start() &#123;</div><div class="line">        open();</div><div class="line">        operation();</div><div class="line">        if (hook()) &#123;</div><div class="line">            commit();</div><div class="line">        &#125;</div><div class="line">        close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    abstract void open();</div><div class="line"></div><div class="line">    abstract void operation();</div><div class="line"></div><div class="line">    abstract void commit();</div><div class="line"></div><div class="line">    abstract void close();</div><div class="line"></div><div class="line">    boolean hook() &#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/29/设计模式模版方法－不解释/" data-id="cj1yap0qp000k045rggvoj7tq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-AES-加密MD5签名" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/AES-加密MD5签名/" class="article-date">
  <time datetime="2017-03-22T11:23:14.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/AES-加密MD5签名/">AES 加密MD5签名</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="模拟服务调用和客户端调用，通过AES加密MD5校验"><a href="#模拟服务调用和客户端调用，通过AES加密MD5校验" class="headerlink" title="模拟服务调用和客户端调用，通过AES加密MD5校验"></a>模拟服务调用和客户端调用，通过AES加密MD5校验</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;dependency&gt;</div><div class="line">     &lt;groupId&gt;commons-codec&lt;/groupId&gt;</div><div class="line">     &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;</div><div class="line">     &lt;version&gt;1.10&lt;/version&gt;</div><div class="line"> &lt;/dependency&gt;</div></pre></td></tr></table></figure>
<pre><code>

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.Hex;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;
import java.security.Key;
import java.security.MessageDigest;

/**
 * Created by zhangchao on 3/22/17.
 */
public class AESTest {

    private static String src = &quot;我是数据源{json}&quot;;

    //26字符
    private static String srckey = &quot;1234567890abcDEF&quot;;
    static String md5Key = &quot;1234567890abcDEF&quot;;

    //aes 目前没有被破解
    public static void main(String args[]) throws Exception {



        //jdkAES();



        //数据加密
       String encryptJson = encrypt(src);
        System.out.println(&quot;encrypt data :&quot;+encryptJson);
        //签名
        String md5Sign = MD5sign(encryptJson,md5Key);
        System.out.println(&quot;md5Sign data :&quot;+md5Sign);
        //发送

        //数据校验
      //encryptJson  服务接口提供数据包
       //md5Sign 对方md5签名
        String vsign = MD5sign(encryptJson,md5Key);
        System.out.println(&quot;vsign data :&quot;+vsign);

        System.out.println(&quot;是否一致&quot;+(vsign.equals(md5Sign)));


        //数据解密
        String decryptJson =decrypt(encryptJson);

        System.out.println(&quot;decypt :&quot;+decryptJson);

    }


    public static String MD5sign(String source,String key ) throws Exception{

        source = source+&quot;&amp;key=&quot;+key;
        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);
        byte[] md5Bytes = md.digest(source.getBytes());
        //byte[] 转16进制
        return Hex.encodeHexString(md5Bytes);
    }





    public static String encrypt(String source) throws Exception{
        //key转换
        Key key = new SecretKeySpec(srckey.getBytes(), &quot;AES&quot;);

        Cipher cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);
        cipher.init(Cipher.ENCRYPT_MODE, key);

        byte[] result = cipher.doFinal(source.getBytes());

         String resultStr   = Base64.encodeBase64String(result);

         return resultStr;
    }

    public static String decrypt(String source) throws Exception{
        //key转换
        Key key = new SecretKeySpec(srckey.getBytes(), &quot;AES&quot;);

        Cipher cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);
        cipher.init(Cipher.DECRYPT_MODE, key);


       // byte[] result = cipher.doFinal(Hex.decodeHex(source.toCharArray()));
        byte[] result = cipher.doFinal(Base64.decodeBase64(source));

        String resultStr =new String(result);
         return resultStr;
    }


    @Deprecated
    public static void jdkAES() throws Exception {



        //key转换
        Key key = new SecretKeySpec(srckey.getBytes(), &quot;AES&quot;);

        Cipher cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);
        cipher.init(Cipher.ENCRYPT_MODE, key);

        byte[] result = cipher.doFinal(src.getBytes());


        String resultJson =  Hex.encodeHexString(result);
        System.out.println(&quot;jdk aes encrypt==&gt;&quot; +resultJson);


        cipher.init(Cipher.DECRYPT_MODE, key);
        byte[] decrypt = cipher.doFinal(Hex.decodeHex(resultJson.toCharArray()));

        System.out.println(&quot;jdk aes decrypt==&gt;&quot; + new String(decrypt));

    }

}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/22/AES-加密MD5签名/" data-id="cj1yap0q00000045rsffc0ner" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-java-base64加密概述" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/java-base64加密概述/" class="article-date">
  <time datetime="2017-03-22T03:02:19.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/java-base64加密概述/">java base64加密概述</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h3><ul>
<li>安全和密码</li>
<li>常用安全体系介绍</li>
<li>密码分类及java的安全组成</li>
<li>JDK相关包及第三扩展</li>
<li>Base64算法介绍</li>
</ul>
<blockquote>
<p>掌握用法<br>深入理解<br>不断实践<br>反复总结<br>再次深入理解实践</p>
</blockquote>
<h3 id="密码常用术语（一）"><a href="#密码常用术语（一）" class="headerlink" title="密码常用术语（一）"></a>密码常用术语（一）</h3><ul>
<li>明文： 待加密信息</li>
<li>密文: 经过加密后的明文</li>
<li>加密：明文转为密文的过程</li>
<li>加密算法：明文转为密文的转换算法</li>
<li>加密密钥：通过加密算法进行加密操作用的密钥</li>
<li>解密：将密文转化为明文的过层</li>
<li>解密算法：密文转明文算法</li>
<li>解密蜜钥：通过解密算法进行接密操作的密钥</li>
</ul>
<h3 id="密码常用术语（二）"><a href="#密码常用术语（二）" class="headerlink" title="密码常用术语（二）"></a>密码常用术语（二）</h3><ul>
<li>密码分析：截获密文者试图通过分析截获得密文从而推断出原来的明文或密钥过程</li>
<li>主动攻击：攻击者非法入侵密码系统，采用伪造，修改，删除等手段向系统注入假消息进进行欺骗(对密文具有破坏作用)</li>
<li>被动攻击：对一个保密系统采取截获密文并对其进行分析和攻击（对密文没有破坏作用）</li>
<li>密码体制：由明文空间，密文空间，密钥空间，加密算法和解密算法五部分构成</li>
</ul>
<h3 id="密码常用术语（三）"><a href="#密码常用术语（三）" class="headerlink" title="密码常用术语（三）"></a>密码常用术语（三）</h3><ul>
<li>密码协议：也是安全协议,指以密码学为基础的消息交换的通信协议，目前是网络环境中提供安全的服务</li>
<li>密码系统: 指用于加密，解密系统</li>
<li>柯克霍夫原则：数据的安全基于密钥而不是算法的保密。既系统的安全取决于密钥，对密钥 保密，对算法公开 －－－ 现代密码学设计的基础原则</li>
</ul>
<h3 id="密码分类"><a href="#密码分类" class="headerlink" title="密码分类"></a>密码分类</h3><ul>
<li>古典密码：以字符为基本加密单位</li>
<li><p>现代密码：以信息块为基本加密单元</p>
</li>
<li><p>保密内容算法</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>应用领域</th>
<th>类别</th>
</tr>
</thead>
<tbody>
<tr>
<td>受限制算法</td>
<td>算法保密性基于保持算法的秘密，(算法保密)</td>
<td>军事</td>
<td>古典密码</td>
</tr>
<tr>
<td>基于密钥算法</td>
<td>算法的保密性基于对密钥的保密(算法公开)</td>
<td></td>
<td>现代密码</td>
</tr>
</tbody>
</table>
<ul>
<li>密码体制</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>别名</th>
<th>详细说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>对称密码</td>
<td>单钥密码或私钥密码</td>
<td>指加密密钥于解密密钥相同</td>
</tr>
<tr>
<td>非对称密码</td>
<td>双钥密码或公钥密码</td>
<td>指加密密钥与解密密钥不同，密钥分公钥和私钥</td>
</tr>
<tr>
<td>对称密码算法</td>
<td>单钥密码算法或私钥密码算法</td>
<td>指应用于对称密码的加密，解密算法</td>
</tr>
<tr>
<td>非对称密码算法</td>
<td>双钥密码算法或公钥密码算法</td>
<td>指对应非对称密码加密和解密算法</td>
</tr>
</tbody>
</table>
<ul>
<li>明文处理方法<ul>
<li>分组加密: 指加密时将名分成固定长度的组，用同一密钥和算法对没一块加密，输出也是固定长度的密文。多用于网络加密</li>
<li>流密码：也称序列密码。指加密时每次加密一位或者一个字节明文(产生一串序列来作为加密的密钥流，从密钥流中按规则依次选取密钥，这些不同的密钥分别来加密每个字符)</li>
</ul>
</li>
<li>散列函数 <ul>
<li>散列函数验证数据完整性: 长度不限制 哈希值容易计算 散列运算过程不可逆<ul>
<li>消息摘要算法MD5等</li>
<li>SHA — 安全散列算法</li>
<li>MAC — 消息认证算法</li>
</ul>
</li>
</ul>
</li>
<li>数字签名 主要针对以数字形式存储的消息进行的处理    </li>
</ul>
<h3 id="安全体系"><a href="#安全体系" class="headerlink" title="安全体系"></a>安全体系</h3><ul>
<li>OSI (Open System Interconnection) 开发通信 网络7层模型</li>
<li>TCP/IP安全体系 </li>
</ul>
<h3 id="java安全组成部分"><a href="#java安全组成部分" class="headerlink" title="java安全组成部分"></a>java安全组成部分</h3><ul>
<li>JCA  </li>
<li>JCE </li>
<li>JSSE </li>
<li><p>JAAS </p>
<p>可以修改JDK添加第三方加解密提供者 $JAVA_HOME/jre/lib/security/java.security </p>
</li>
</ul>
<h3 id="相关java包，类"><a href="#相关java包，类" class="headerlink" title="相关java包，类"></a>相关java包，类</h3><ul>
<li>java.security<ul>
<li>消息摘要 </li>
</ul>
</li>
<li>javax.crypot<ul>
<li>安全消息摘要，消息认证（鉴别）码</li>
</ul>
</li>
<li>java.net.ssl<ul>
<li>安全套接字，网络传输<h3 id="第三方java扩展"><a href="#第三方java扩展" class="headerlink" title="第三方java扩展"></a>第三方java扩展</h3></li>
</ul>
</li>
<li>Bouncy Castle<ul>
<li>两种支持方案: 1) 配置  2) 调用</li>
</ul>
</li>
<li>Commons CodeC<ul>
<li>Apache </li>
<li>Base64 二进制 十六进制,字符集编码</li>
<li>Url 编码/解码</li>
</ul>
</li>
</ul>
<h3 id="实现Base64算法"><a href="#实现Base64算法" class="headerlink" title="实现Base64算法"></a>实现Base64算法</h3><ul>
<li>Base64算法 提供者 1.Jdk 2.Commons Codec 3.Bouncy Castle</li>
</ul>
<p>创建maven项目，pom.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">  &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;bcprov-jdk16&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;1.46&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;commons-codec&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;1.10&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<p>Base64Test.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">import org.apache.commons.codec.binary.Base64;</div><div class="line">import sun.misc.BASE64Decoder;</div><div class="line">import sun.misc.BASE64Encoder;</div><div class="line"> </div><div class="line">public class Base64Test &#123;</div><div class="line"></div><div class="line">    private static String src=&quot;yundongshequ security base64&quot;;</div><div class="line"></div><div class="line">   public static void main(String [] args) throws  Exception&#123;</div><div class="line"></div><div class="line">       System.out.println(&quot;-------jdkBase64---------&quot;);</div><div class="line">       jdkBase64();</div><div class="line"></div><div class="line">       System.out.println(&quot;-------commonsCodeBase64---------&quot;);</div><div class="line">       commonsCodeBase64();</div><div class="line"></div><div class="line">       System.out.println(&quot;-------bouncyCastleBase64---------&quot;);</div><div class="line">       bouncyCastleBase64();</div><div class="line">   &#125;</div><div class="line"></div><div class="line">    //jdk实现</div><div class="line">   public static void  jdkBase64()throws  Exception&#123;</div><div class="line"></div><div class="line">       BASE64Encoder encoder = new BASE64Encoder();</div><div class="line">       String encode = encoder.encode(src.getBytes());</div><div class="line">       System.out.println(&quot;encode: &quot;+encode);</div><div class="line"></div><div class="line">       BASE64Decoder decoder = new BASE64Decoder();</div><div class="line">       byte[] decodeBuffer = decoder.decodeBuffer(encode);</div><div class="line"></div><div class="line">       System.out.println(&quot;decode: &quot;+new String(decodeBuffer));</div><div class="line"></div><div class="line">   &#125;</div><div class="line"></div><div class="line">   //Commons Codec</div><div class="line">    public static void commonsCodeBase64()&#123;</div><div class="line"></div><div class="line">       byte[] encodeBase64 = Base64.encodeBase64(src.getBytes());</div><div class="line">        System.out.println(&quot;encode: &quot;+new String(encodeBase64));</div><div class="line"></div><div class="line">        byte[] decodeBase64 =  Base64.decodeBase64(encodeBase64);</div><div class="line"></div><div class="line">        System.out.println(&quot;decode: &quot;+new String(decodeBase64));</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //Bouncy Castle</div><div class="line">    public static void bouncyCastleBase64()&#123;</div><div class="line"></div><div class="line">        byte[] encodeBase64=  org.bouncycastle.util.encoders.Base64.encode(src.getBytes());</div><div class="line">        System.out.println(&quot;encode: &quot;+new String(encodeBase64));</div><div class="line">        byte[] decodeBase64 =  org.bouncycastle.util.encoders.Base64.decode(encodeBase64);</div><div class="line"></div><div class="line">        System.out.println(&quot;decode: &quot;+new String(decodeBase64));</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Base64算法应用场景"><a href="#Base64算法应用场景" class="headerlink" title="Base64算法应用场景"></a>Base64算法应用场景</h3><ul>
<li>e-mail,密钥,证书文件</li>
<li>产生： 邮件的历史问题</li>
<li>定义: 基于64个字符的编码算法</li>
<li>关于RFC2045</li>
<li>衍生: Base16,32 Url Base64</li>
<li>Base64算法与加密算法都是公开的</li>
</ul>
<blockquote>
<p>我们知道在计算机中任何数据都是按ascii码存储的，而ascii码的128～255之间的值是不可见字符。而在网络上交换数据时，比如说从A地传到B地，往往要经过多个路由设备，由于不同的设备对字符的处理方式有一些不同，这样那些不可见字符就有可能被处理错误，这是不利于传输的。所以就先把数据先做一个Base64编码，统统变成可见字符，这样出错的可能性就大降低了</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/22/java-base64加密概述/" data-id="cj1yap0qa0004045rd1q6qg2l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式外观模式-不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/设计模式外观模式-不解释/" class="article-date">
  <time datetime="2017-03-10T09:20:21.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/设计模式外观模式-不解释/">设计模式外观模式-不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="外观模式-提供一个统一的接口-用来访问子系统中的一群接口-外观定义类一个高层接口-让子系统更容易使用"><a href="#外观模式-提供一个统一的接口-用来访问子系统中的一群接口-外观定义类一个高层接口-让子系统更容易使用" class="headerlink" title="外观模式:提供一个统一的接口,用来访问子系统中的一群接口,外观定义类一个高层接口,让子系统更容易使用"></a>外观模式:提供一个统一的接口,用来访问子系统中的一群接口,外观定义类一个高层接口,让子系统更容易使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 外观模式:提供一个统一的接口,用来访问子系统中的一群接口,外观定义类一个高层接口,让子系统更容易使用</div><div class="line"> * 外观和适配器可以包装许多类,但是外观的意图是简化接口,而适配器是将接口转化成不同接口</div><div class="line"> * 外观不只是简化了接口,也将客户从组件的子系统中解耦</div><div class="line"> * &lt;p&gt;</div><div class="line"> * ***************</div><div class="line"> * 当需要使用一个现有的类而起接口并不符合你的需要时,就使用适配器</div><div class="line"> * 当需要简化并统一一个很大的接口或是一群复杂的接口是,使用外观</div><div class="line"> * 适配器改变接口符合客户的期望</div><div class="line"> * 外观将客户从一个负责的子系统中解耦</div><div class="line"> * 实现一个外观,需要将系统组合进外观中,然后工作委托给子系统执行</div><div class="line"> * 适配器模式两种模式: 对象适配,类适配</div><div class="line"> * 适配器将一个对象包装起来以改变其接口,装饰者将一个对象包装起来以增加新的行为和责任,而外观将一群对象包装起来简化其接口</div><div class="line"> * ***************</div><div class="line"> * &lt;p&gt;</div><div class="line"> */</div><div class="line">public class FacadePattern &#123;</div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line">        //客户端调用</div><div class="line">        OperationFacade facade = new OperationFacade();</div><div class="line">        facade.run();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//外观</div><div class="line">class OperationFacade &#123;</div><div class="line"></div><div class="line">    private SubSystemA subSystemA;</div><div class="line">    private SubSystemB subSystemB;</div><div class="line">    private SubSystemC subSystemC;</div><div class="line"></div><div class="line">    public OperationFacade() &#123;</div><div class="line">        subSystemA = new subSystemAImpl();</div><div class="line">        subSystemB = new subSystemBImpl();</div><div class="line">        subSystemC = new SubSystemC();</div><div class="line">    &#125;</div><div class="line">    public void run() &#123;</div><div class="line">        subSystemA.methodA();</div><div class="line">        subSystemB.methodB();</div><div class="line">        subSystemC.methodC();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">interface SubSystemA &#123;</div><div class="line">    void methodA();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">interface SubSystemB &#123;</div><div class="line">    void methodB();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class subSystemAImpl implements SubSystemA &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void methodA() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;subSystemAImpl ==&gt; methodA&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class subSystemAAImpl implements SubSystemA &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void methodA() &#123;</div><div class="line">        System.out.println(&quot;subSystemAAImpl ==&gt; methodA&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class subSystemBImpl implements SubSystemB &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void methodB() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;subSystemBImpl ==&gt; methodB&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class SubSystemC &#123;</div><div class="line"></div><div class="line">    public void methodC() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;subSystemC ==&gt; methodC&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/10/设计模式外观模式-不解释/" data-id="cj1yap0qm000f045reodfoy3y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式适配器模式-不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/设计模式适配器模式-不解释/" class="article-date">
  <time datetime="2017-03-10T09:18:57.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/设计模式适配器模式-不解释/">设计模式适配器模式-不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="适配器模式-将一个类的接口-转化成客户期望的另一个接口-适配器让原本不兼容的类可以合作无间"><a href="#适配器模式-将一个类的接口-转化成客户期望的另一个接口-适配器让原本不兼容的类可以合作无间" class="headerlink" title="适配器模式: 将一个类的接口,转化成客户期望的另一个接口,适配器让原本不兼容的类可以合作无间"></a>适配器模式: 将一个类的接口,转化成客户期望的另一个接口,适配器让原本不兼容的类可以合作无间</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 适配器模式: 将一个类的接口,转化成客户期望的另一个接口,适配器让原本不兼容的类可以合作无间</div><div class="line"> * 适配过程</div><div class="line"> * 1.客户通过目标接口调用适配器的方法对适配器发出请求</div><div class="line"> * 2.适配器使用被适配者接口把请求转化成适配者的一个或多个调用接口</div><div class="line"> * 3.客户接受到调用的结果,但并未察觉这一切是适配器在起转化作用</div><div class="line"> *</div><div class="line"> * 对象适配器:基于组合实现(所有方法必须使用适配者中的方法重新实现,可以接受任务目标接口子类)</div><div class="line"> * 类适配器: 基于继承实现 (方法可自定义实现,不用完全重新目标接口中方法 直接继承被适配者)</div><div class="line"> *</div><div class="line"> *</div><div class="line"> * ***************</div><div class="line"> * 当需要使用一个现有的类而起接口并不符合你的需要时,就使用适配器</div><div class="line"> * 当需要简化并统一一个很大的接口或是一群复杂的接口是,使用外观</div><div class="line"> * 适配器改变接口符合客户的期望</div><div class="line"> * 外观将客户从一个负责的子系统中解耦</div><div class="line"> * 实现一个外观,需要将系统组合进外观中,然后工作委托给子系统执行</div><div class="line"> * 适配器模式两种模式: 对象适配,类适配</div><div class="line"> * 适配器将一个对象包装起来以改变其接口,装饰者将一个对象包装起来以增加新的行为和责任,而外观将一群对象包装起来简化其接口</div><div class="line"> * ***************</div><div class="line"> */</div><div class="line">public class AdapterPattern &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public static void main(String args[])&#123;</div><div class="line"></div><div class="line"></div><div class="line">        System.out.println(&quot;--------------------对象适配----------------------------------------&quot;);</div><div class="line"></div><div class="line"></div><div class="line">        outdoorGameAdapterTestByObjectDemo();</div><div class="line"></div><div class="line"></div><div class="line">        System.out.println(&quot;--------------------类适配----------------------------------------&quot;);</div><div class="line"></div><div class="line">        outdoorGameAdapterTestByClassDemo();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    //对象适配器演示</div><div class="line">    public static void outdoorGameAdapterTestByObjectDemo()&#123;</div><div class="line">        //计算机游戏</div><div class="line">        ComputerGame computerGame = new TheWorldOfLegendGame();</div><div class="line"></div><div class="line">        computerGame.spend();</div><div class="line">        computerGame.timeLimit();</div><div class="line"></div><div class="line"></div><div class="line">        //使用对象适配 户外活动游戏</div><div class="line">        OutdoorGame outdoorGame = new ClimbMountainGame();</div><div class="line">        computerGame = new OutdoorGameAdapter(outdoorGame);</div><div class="line">        System.out.println(&quot;===适配后===&quot;);</div><div class="line">        computerGame.spend();</div><div class="line">        computerGame.timeLimit();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //类适配器演示</div><div class="line">    public static void outdoorGameAdapterTestByClassDemo()&#123;</div><div class="line">        //计算机游戏</div><div class="line">        ComputerGame computerGame = new TheWorldOfLegendGame();</div><div class="line"></div><div class="line">        computerGame.spend();</div><div class="line">        computerGame.timeLimit();</div><div class="line"></div><div class="line">        computerGame = new OutdoorGameAdapter2(computerGame);</div><div class="line"></div><div class="line">        System.out.println(&quot;===适配后===&quot;);</div><div class="line">        computerGame.spend();</div><div class="line">        computerGame.timeLimit();</div><div class="line"></div><div class="line">     &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//定义个计算机游戏接口</div><div class="line">interface ComputerGame&#123;</div><div class="line"></div><div class="line">    //游戏需要花费</div><div class="line">    void spend();</div><div class="line"></div><div class="line">    //游戏时间限制</div><div class="line">    void timeLimit();</div><div class="line">&#125;</div><div class="line"></div><div class="line">//定义户外活动接口</div><div class="line">interface OutdoorGame&#123;</div><div class="line"></div><div class="line">    //活动报名费用</div><div class="line">    void enrollSpend();</div><div class="line">    //活动门票</div><div class="line">    void entranceSpend();</div><div class="line">    //活动车费</div><div class="line">    void waySpend();</div><div class="line"></div><div class="line">    //活动时间</div><div class="line">    void  SportTime();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//计算机游戏具体实现</div><div class="line">class TheWorldOfLegendGame implements ComputerGame&#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void spend() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;传奇世界 需要花费每小时5元人民币&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void timeLimit() &#123;</div><div class="line"></div><div class="line">        System.out.println(&quot;每天最多在线7小时&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//获取活动具体实现</div><div class="line"></div><div class="line">class ClimbMountainGame implements OutdoorGame&#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void enrollSpend() &#123;</div><div class="line">        System.out.println(&quot;报名费 10元&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void entranceSpend() &#123;</div><div class="line">        System.out.println(&quot;门票 15元&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void waySpend() &#123;</div><div class="line">        System.out.println(&quot;路费 50元&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void SportTime() &#123;</div><div class="line">        System.out.println(&quot;活动时间一天 17小时左右&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//---------- 对象适配器 将 OutdoorGame 适配 SportGame 可以接受任意 ComputerGame 子类   ---------</div><div class="line"></div><div class="line"></div><div class="line">//定义 OutdoorGame 适配器</div><div class="line">class OutdoorGameAdapter implements ComputerGame&#123;</div><div class="line"></div><div class="line">    OutdoorGame outdoorGame;</div><div class="line"></div><div class="line">    public OutdoorGameAdapter(OutdoorGame outdoorGame) &#123;</div><div class="line">        this.outdoorGame = outdoorGame;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void spend() &#123;</div><div class="line">        outdoorGame.enrollSpend();</div><div class="line">        outdoorGame.entranceSpend();</div><div class="line">        outdoorGame.waySpend();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void timeLimit() &#123;</div><div class="line">        outdoorGame.SportTime();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//---------- 类适配器 ---------</div><div class="line"></div><div class="line">//我们只想使用配适配这的 消费方法(spend()),时间方法沿用目标接口(timeLimit())</div><div class="line">class OutdoorGameAdapter2 extends ClimbMountainGame implements ComputerGame&#123;</div><div class="line"></div><div class="line"></div><div class="line">    ComputerGame computerGame;</div><div class="line">    public OutdoorGameAdapter2(ComputerGame computerGame) &#123;</div><div class="line">        this.computerGame = computerGame;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void spend() &#123;</div><div class="line">        super.enrollSpend();</div><div class="line">        super.entranceSpend();</div><div class="line">        super.waySpend();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void timeLimit() &#123;</div><div class="line">        computerGame.timeLimit();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/10/设计模式适配器模式-不解释/" data-id="cj1yap0r80012045rt4cj8d46" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式装饰模式-不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/设计模式装饰模式-不解释/" class="article-date">
  <time datetime="2017-03-10T09:17:46.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/设计模式装饰模式-不解释/">设计模式装饰模式-不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="装饰模式-动态扩展功能"><a href="#装饰模式-动态扩展功能" class="headerlink" title="装饰模式:动态扩展功能"></a>装饰模式:动态扩展功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">import java.io.*;</div><div class="line">import java.util.ArrayList;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 装饰模式:动态扩展功能</div><div class="line"> * 基于继承的组合方式,灵活配置(InputStream ==&gt; FileInputStream ==&gt; BufferedInputStream)</div><div class="line"> * 其实现核心: 使用对象中返回方法加工再返回</div><div class="line"> * 缺点: 如果被装饰者中数据源非常多,不建议使用组合装饰,因为装饰者除去装饰方法,其他数据源也好同步更新</div><div class="line"> * 适合: 少量数据原 其方法都是基于数据源操作</div><div class="line"> * 可以参考 java.io 使用继承方式使用,只装饰需要处理的方法,因为是单一数据源,不需要复制其他属性</div><div class="line"> * 单一数据源: 不是必须只是一个属性,而是基类型中构造器将如参对象进行属性赋值</div><div class="line"> */</div><div class="line">public class DecoratePattern &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line"></div><div class="line">        //装饰模式演示</div><div class="line">        //decorateDemo();</div><div class="line"></div><div class="line">        //java IO 演示</div><div class="line">        //inputStreamExtDemo()</div><div class="line"></div><div class="line">        //上面两个看不不明白的看这里</div><div class="line">        //角色</div><div class="line">        //给角色装饰各种装备</div><div class="line">        GameRole game = new GameMage();</div><div class="line"></div><div class="line">        //把角色装饰三个武器</div><div class="line">        game = new YiTian(game);</div><div class="line">        game = new TuLongDao(game);</div><div class="line">        game = new NanMingLiHuoJian(game);</div><div class="line"></div><div class="line">        //新的角色</div><div class="line">        //game = new GameKnight();</div><div class="line">       // game = new NanMingLiHuoJian(game);</div><div class="line"></div><div class="line">       System.out.print( game.toString());</div><div class="line">        //游戏展示</div><div class="line">      //  new GameShow(game);</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    //java.io 演示</div><div class="line">    public static void inputStreamExtDemo() &#123;</div><div class="line"></div><div class="line">        int c;</div><div class="line">        try &#123;</div><div class="line">            InputStream in =</div><div class="line">                    new LowerCaseInputStream</div><div class="line">                            (new BufferedInputStream(</div><div class="line">                                    new FileInputStream(&quot;test.txt&quot;)));</div><div class="line"></div><div class="line">            while ((c = in.read()) &gt;= 0) &#123;</div><div class="line">                System.out.println((char) c);</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 装饰模式演示</div><div class="line">     * **/</div><div class="line">    public static void decorateDemo() &#123;</div><div class="line"></div><div class="line">        Beverage beverage = new Espresso();</div><div class="line"></div><div class="line">        System.out.println(beverage.getDescription() + &quot; $&quot; + beverage.cost());</div><div class="line"></div><div class="line">        beverage = new Mocha(beverage);</div><div class="line"></div><div class="line">        System.out.println(beverage.getDescription() + &quot; $&quot; + beverage.cost());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**************************************  Beverage ******************************************************************************************/</div><div class="line"></div><div class="line"></div><div class="line">abstract class Beverage &#123;</div><div class="line"></div><div class="line">    String description = &quot;Unknown Beverage&quot;;</div><div class="line"></div><div class="line">    public String getDescription() &#123;</div><div class="line">        return description;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public abstract double cost();</div><div class="line">&#125;</div><div class="line"></div><div class="line">abstract class CondimentDecorator extends Beverage &#123;</div><div class="line">    public abstract String getDescription();</div><div class="line">&#125;</div><div class="line"></div><div class="line">//被装饰</div><div class="line">class Espresso extends Beverage &#123;</div><div class="line"></div><div class="line">    public Espresso() &#123;</div><div class="line">        description = &quot;Espresso&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public double cost() &#123;</div><div class="line">        return 1.99;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//被装饰</div><div class="line">class HouseBlend extends Beverage &#123;</div><div class="line"></div><div class="line">    public HouseBlend() &#123;</div><div class="line">        description = &quot;House Blend&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public double cost() &#123;</div><div class="line">        return 0.89;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//装饰者</div><div class="line">class Mocha extends CondimentDecorator &#123;</div><div class="line"></div><div class="line">    Beverage beverage;</div><div class="line"></div><div class="line">    public Mocha(Beverage beverage) &#123;</div><div class="line">        this.beverage = beverage;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return beverage.getDescription() + &quot;,Mocha&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public double cost() &#123;</div><div class="line">        return 0.2 + beverage.cost();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**************************************  LowerCaseInputStream ******************************************************************************************/</div><div class="line"></div><div class="line"></div><div class="line">//java io</div><div class="line">class LowerCaseInputStream extends FilterInputStream &#123;</div><div class="line"></div><div class="line">    public LowerCaseInputStream(InputStream in) &#123;</div><div class="line">        super(in);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int read() throws IOException &#123;</div><div class="line">        int c = super.read();</div><div class="line">        return (c == -1 ? c : Character.toLowerCase((char) c));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int read(byte[] b, int offset, int len) throws IOException &#123;</div><div class="line">        int result = super.read(b, offset, len);</div><div class="line">        for (int i = offset; i &lt; offset + result; i++) &#123;</div><div class="line">            b[i] = (byte) Character.toLowerCase((char) b[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**************************************  GameRole ******************************************************************************************/</div><div class="line"></div><div class="line">//游戏超类</div><div class="line">abstract class GameRole &#123;</div><div class="line"></div><div class="line">    String name=&quot;角色名称&quot;;</div><div class="line">    ArrayList&lt;String&gt; equip;</div><div class="line">    public GameRole()&#123;&#125;</div><div class="line"></div><div class="line">    public GameRole(String name)&#123;</div><div class="line">        this.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public GameRole(String name, ArrayList&lt;String&gt; equip)&#123;</div><div class="line">        this.name = name;</div><div class="line">        this.equip = equip;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public GameRole(GameRole role)&#123;</div><div class="line">        this.name = role.getName();</div><div class="line">        this.equip = role.getEquip();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    abstract String getDescription();</div><div class="line"></div><div class="line">    abstract int getAttack();</div><div class="line"></div><div class="line">    public String getName() &#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public ArrayList&lt;String&gt; getEquip() &#123;</div><div class="line">        return equip==null?new ArrayList&lt;&gt;():equip;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//游戏角色装备</div><div class="line">//必须要实现的方法</div><div class="line">abstract class GameEquip extends GameRole &#123;</div><div class="line"></div><div class="line"></div><div class="line">   public GameEquip(GameRole role)&#123;</div><div class="line">       super(role);</div><div class="line">   &#125;</div><div class="line">    public abstract String getDescription();</div><div class="line">    public abstract ArrayList&lt;String&gt; getEquip();</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString()&#123;</div><div class="line">        StringBuffer stringBuffer = new StringBuffer();</div><div class="line">        stringBuffer.append(&quot;名称: &quot;).append(this.getName()).append(&quot; \n&quot;);</div><div class="line">        stringBuffer.append(&quot;描述: &quot;).append(this.getDescription()).append(&quot;\n&quot;);</div><div class="line">        stringBuffer.append(&quot;总攻击: &quot;).append(this.getAttack()).append(&quot;\n&quot;);</div><div class="line">        stringBuffer.append(&quot;装备: &quot;).append(this.getEquip().toString()).append(&quot;\n&quot;);</div><div class="line">        return stringBuffer.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">/***</div><div class="line"> *</div><div class="line"> *  游戏显示</div><div class="line"> * */</div><div class="line">class GameShow &#123;</div><div class="line"></div><div class="line"></div><div class="line">    GameRole game;</div><div class="line"></div><div class="line">    public GameShow(GameRole gameRole) &#123;</div><div class="line">        this.game = gameRole;</div><div class="line">        StringBuffer stringBuffer = new StringBuffer();</div><div class="line">        stringBuffer.append(&quot;名称: &quot;).append(game.getName()).append(&quot; \n&quot;);</div><div class="line">        stringBuffer.append(&quot;描述: &quot;).append(game.getDescription()).append(&quot;\n&quot;);</div><div class="line">        stringBuffer.append(&quot;总攻击: &quot;).append(game.getAttack()).append(&quot;\n&quot;);</div><div class="line">        stringBuffer.append(&quot;装备: &quot;).append(game.getEquip().toString()).append(&quot;\n&quot;);</div><div class="line"></div><div class="line">        System.out.print(stringBuffer.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 倚天剑 就用拼音了,真不好翻译</div><div class="line"> **/</div><div class="line">class YiTian extends GameEquip &#123;</div><div class="line"></div><div class="line">    private int atk = 200;</div><div class="line"></div><div class="line"></div><div class="line">    GameRole game;</div><div class="line"></div><div class="line"></div><div class="line">    //复制必要数据</div><div class="line">    public YiTian(GameRole game) &#123;</div><div class="line">        super(game);</div><div class="line">        this.game = game;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    int getAttack() &#123;</div><div class="line">        return atk + game.getAttack();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return game.getDescription()+&quot;, 倚天剑攻击力+&quot; + atk+&quot;&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public ArrayList&lt;String&gt; getEquip() &#123;</div><div class="line"></div><div class="line">        this.equip.add(&quot;倚天剑&quot;);</div><div class="line">        return equip;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//</div><div class="line">///**</div><div class="line">// * 屠龙刀 就用拼音了,真不好翻译</div><div class="line">// **/</div><div class="line">class TuLongDao extends GameEquip &#123;</div><div class="line"></div><div class="line">    private int atk = 200;</div><div class="line"></div><div class="line"></div><div class="line">    GameRole game;</div><div class="line"></div><div class="line">    public TuLongDao(GameRole game) &#123;</div><div class="line">        super(game);</div><div class="line">        this.game = game;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    int getAttack() &#123;</div><div class="line">        return atk + game.getAttack();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return game.getDescription()+&quot;,屠龙刀攻击力+&quot; + atk+&quot;&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public ArrayList&lt;String&gt; getEquip() &#123;</div><div class="line"></div><div class="line">        equip.add(&quot;屠龙刀&quot;);</div><div class="line">        return equip;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//</div><div class="line">///**</div><div class="line">// * 南明离火剑 就用拼音了,真不好翻译</div><div class="line">// **/</div><div class="line">class NanMingLiHuoJian extends GameEquip &#123;</div><div class="line"></div><div class="line">    private int atk = 1200;</div><div class="line"></div><div class="line"></div><div class="line">    GameRole game;</div><div class="line"></div><div class="line">    public NanMingLiHuoJian(GameRole game) &#123;</div><div class="line">        super(game);</div><div class="line">        this.game = game;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    int getAttack() &#123;</div><div class="line">        return atk + game.getAttack();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return game.getDescription()+&quot;,南明离火剑攻击力+&quot; + atk+&quot;&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public ArrayList&lt;String&gt; getEquip() &#123;</div><div class="line"></div><div class="line">        equip.add(&quot;南明离火剑&quot;);</div><div class="line">        return equip;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//角色-&gt; 法师</div><div class="line">class GameMage extends GameRole &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public GameMage()&#123;</div><div class="line">        this.name = &quot;法师&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return &quot;远程攻击&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    int getAttack() &#123;</div><div class="line">        return 1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//角色-&gt; 武士</div><div class="line">class GameKnight extends GameRole &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public GameKnight()&#123;</div><div class="line">        this.name = &quot;武士&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String getDescription() &#123;</div><div class="line">        return &quot;近战型攻击&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    int getAttack() &#123;</div><div class="line">        return 1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/10/设计模式装饰模式-不解释/" data-id="cj1yap0qz000u045r076i7k4m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="clean-blog-设计模式命令模式-不解释" class="article article-type-clean-blog" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/设计模式命令模式-不解释/" class="article-date">
  <time datetime="2017-03-10T09:16:35.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/设计模式命令模式-不解释/">设计模式命令模式-不解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="命令模式-当需要将发出请求的对象和执行请求的对象解耦合的时候使用命令模式"><a href="#命令模式-当需要将发出请求的对象和执行请求的对象解耦合的时候使用命令模式" class="headerlink" title="命令模式 (当需要将发出请求的对象和执行请求的对象解耦合的时候使用命令模式)"></a>命令模式 (当需要将发出请求的对象和执行请求的对象解耦合的时候使用命令模式)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/**</div><div class="line"> * 命令模式 (当需要将发出请求的对象和执行请求的对象解耦合的时候使用命令模式)</div><div class="line"> * ` 将请求封装成对象,这可以让你使不同的请求,队列,或者日志来参数化其他对象,</div><div class="line"> * 命令模式也可以支持撤销操作 `</div><div class="line"> * 要点:</div><div class="line"> * 1.命令模式将发出请求的对象和执行请求对象解耦</div><div class="line"> * 2.在被解耦的两者之间是通过命令对象进行沟通的,命令对象封装了接受者和一个或一组动作</div><div class="line"> * 3.调用者通过调用命令对象的 execute() 发出请求,这会使得接受者的动作被调用</div><div class="line"> * 4.调用者可以接受命令当作参数,甚至在运行时动态地执行</div><div class="line"> * 5.名利可以支持撤销,做法是实现一个undo()方法来回到execute()被执行前的状态</div><div class="line"> * 6.宏命令是命令的一种简单延伸,允许调用多个命令,同时支持撤销</div><div class="line"> * 7.命令也可以来实现日志和事务系统</div><div class="line"> *</div><div class="line"> * 提供简单版本和复杂版本</div><div class="line"> *</div><div class="line"> * 场景描述:</div><div class="line"> *  英雄 超人 和蜘蛛侠</div><div class="line"> *  每个人的技能都不相同,统一交给按钮控制(命令模式将发出请求的对象和执行请求对象解耦)</div><div class="line"> *  英雄 和 控制器调用之间 完全解耦</div><div class="line"> *</div><div class="line"> */</div><div class="line">public class CommandPattern &#123;</div><div class="line"></div><div class="line"></div><div class="line">    public static void main(String[] args)&#123;</div><div class="line"></div><div class="line"></div><div class="line">        //简单版本实现</div><div class="line">        SimpleRemoteDemo();</div><div class="line"></div><div class="line">        //复杂模式</div><div class="line">        ComplexRemoteDemo();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //简单版本实现</div><div class="line">    static void SimpleRemoteDemo()&#123;</div><div class="line">        SimpleRemoteControl remote = new SimpleRemoteControl();</div><div class="line">        Light light = new Light();</div><div class="line">        LightOnCommand lightOnCommand = new LightOnCommand(light);</div><div class="line">        remote.setCommand(lightOnCommand);</div><div class="line">        remote.buttonWasPressed();</div><div class="line">        remote.undoButtonWasPressed();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //复杂模式</div><div class="line">    static void ComplexRemoteDemo()&#123;</div><div class="line"></div><div class="line">        //初始化控制器 传入控制英雄数量</div><div class="line">        RemoteControl remoteControl = new RemoteControl(3);</div><div class="line"></div><div class="line">        //创建两个英雄</div><div class="line">         HeroSuperman heroSuperman = new HeroSuperman(&quot;超人&quot;);</div><div class="line"></div><div class="line">        //创建命令</div><div class="line">         HeroSupermanCommand heroSupermanCommand = new HeroSupermanCommand(heroSuperman);</div><div class="line"></div><div class="line">        //将对象放到插槽中</div><div class="line">        remoteControl.setCommand(0,heroSupermanCommand);</div><div class="line">        remoteControl.setCommand(1,new HeroSpiderManCommand(new HeroSpiderMan(&quot;蜘蛛侠&quot;)));</div><div class="line"></div><div class="line"></div><div class="line">        //点下按钮一</div><div class="line">        remoteControl.buttonWasPressed(0);</div><div class="line">        //撤销</div><div class="line">        remoteControl.undoButtonWasPressed();</div><div class="line">        //点下按钮2</div><div class="line">        remoteControl.buttonWasPressed(1);</div><div class="line">        remoteControl.undoButtonWasPressed();</div><div class="line"></div><div class="line">        //在实现按下一个按钮把上述全部执行</div><div class="line"></div><div class="line">        Command[] commands = &#123;heroSupermanCommand,new HeroSpiderManCommand(new HeroSpiderMan(&quot;蜘蛛侠&quot;))&#125;;</div><div class="line">        MacroCommand macroCommand = new MacroCommand(commands);</div><div class="line">        //将对象放到插槽中</div><div class="line"></div><div class="line">        System.out.println(&quot;----------------多重控制------------------------&quot;);</div><div class="line"></div><div class="line">        remoteControl.setCommand(2,macroCommand);</div><div class="line">        System.out.println(&quot;----------------多重控制 开始攻击------------------------&quot;);</div><div class="line">        remoteControl.buttonWasPressed(2);</div><div class="line">        System.out.println(&quot;----------------多重控制 开始撤回------------------------&quot;);</div><div class="line">        remoteControl.undoButtonWasPressed();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">/***Simple Demo BEN************************************************************************************/</div><div class="line">/**</div><div class="line"> * 命令基类</div><div class="line"> * 让所有命令对象实现相同的包含一个方法的接口</div><div class="line"> * **/</div><div class="line">interface Command&#123;</div><div class="line">    void execute();</div><div class="line">    void undo();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 控制器 总控</div><div class="line"> * 请求的对象</div><div class="line"> * 调用者可以接受命令当作参数,甚至在运行时动态地执行</div><div class="line"> * **/</div><div class="line">class SimpleRemoteControl&#123;</div><div class="line"></div><div class="line">    Command slot;</div><div class="line"></div><div class="line">    public SimpleRemoteControl()&#123;&#125;</div><div class="line"></div><div class="line">    public void setCommand(Command command)&#123;</div><div class="line">        this.slot = command;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void buttonWasPressed()&#123;</div><div class="line">        slot.execute();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void undoButtonWasPressed()&#123;</div><div class="line">        slot.undo();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 某一种产品</div><div class="line"> * 具体实现</div><div class="line"> * 执行请求对象</div><div class="line"> * */</div><div class="line">class Light&#123;</div><div class="line">    public void on()&#123;</div><div class="line">        System.out.println(&quot;灯量了&quot;);</div><div class="line">    &#125;</div><div class="line">    public void off()&#123;</div><div class="line">        System.out.println(&quot;灯熄灭了&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 某一种产品的某一种执行方法</div><div class="line"> * 创建命令</div><div class="line"> * 命令对象封装了接受者和一个或一组动作</div><div class="line"> * */</div><div class="line">class LightOnCommand implements Command&#123;</div><div class="line"></div><div class="line">    Light light;</div><div class="line">    public LightOnCommand(Light light)&#123;</div><div class="line">        this.light = light;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void execute() &#123;</div><div class="line">        light.on();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void undo() &#123;</div><div class="line">        light.off();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/***Simple Demo   END************************************************************************************/</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">/***Complex Demo   BEN************************************************************************************/</div><div class="line"></div><div class="line">class NoCommand implements Command&#123;</div><div class="line">    @Override</div><div class="line">    public void execute() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void undo() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 英雄超人</div><div class="line"> * */</div><div class="line">class HeroSuperman&#123;</div><div class="line"></div><div class="line">    private String name;</div><div class="line"></div><div class="line">    public HeroSuperman(String name)&#123;</div><div class="line">        this.name=name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 攻击A</div><div class="line">     * */</div><div class="line">    public void attackA()&#123;</div><div class="line">        System.out.println(name+&quot;send......&gt;&gt;&gt;&gt;&gt;&gt; attackA&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 攻击B</div><div class="line">     * */</div><div class="line">    public void attackB()&#123;</div><div class="line">        System.out.println(name+&quot;send......&gt;&gt;&gt;&gt;&gt;&gt; attackB&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 撤销攻击</div><div class="line">     * */</div><div class="line">    public void attackUndo()&#123;</div><div class="line">        System.out.println(name+&quot;undo......&gt;&gt;&gt;&gt;&gt;&gt; attackB&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * 英雄蜘蛛侠</div><div class="line"> * */</div><div class="line">class HeroSpiderMan&#123;</div><div class="line"></div><div class="line"></div><div class="line">    private String name;</div><div class="line"></div><div class="line">    public HeroSpiderMan(String name)&#123;</div><div class="line">        this.name=name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /**</div><div class="line">     * 攻击A</div><div class="line">     * */</div><div class="line">    public void attackC()&#123;</div><div class="line">        System.out.println(name+&quot;send......&gt;&gt;&gt;&gt;&gt;&gt; attackC&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 攻击B</div><div class="line">     * */</div><div class="line">    public void attackD()&#123;</div><div class="line">        System.out.println(name+&quot;send......&gt;&gt;&gt;&gt;&gt;&gt; attackD&quot;);</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 攻击B</div><div class="line">     * */</div><div class="line">    public void attackE()&#123;</div><div class="line">        System.out.println(name+&quot;send......&gt;&gt;&gt;&gt;&gt;&gt; attackE&quot;);</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 撤销攻击</div><div class="line">     * */</div><div class="line">    public void attackUndoA()&#123;</div><div class="line">        System.out.println(name+&quot;undo......&gt;&gt;&gt;&gt;&gt;&gt; attackA-B-C-D&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">/***</div><div class="line"> * 创建英雄超人攻击命令</div><div class="line"> * */</div><div class="line">class HeroSupermanCommand implements Command&#123;</div><div class="line"></div><div class="line">    private HeroSuperman heroSuperman;</div><div class="line"></div><div class="line">    public HeroSupermanCommand(HeroSuperman heroSuperman) &#123;</div><div class="line">        this.heroSuperman = heroSuperman;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void undo() &#123;</div><div class="line">        heroSuperman.attackUndo();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void execute() &#123;</div><div class="line">        heroSuperman.attackA();</div><div class="line">        heroSuperman.attackB();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/***</div><div class="line"> * 创建英雄蜘蛛侠攻击命令</div><div class="line"> * */</div><div class="line">class HeroSpiderManCommand implements Command&#123;</div><div class="line"></div><div class="line">    private HeroSpiderMan heroSpiderMan;</div><div class="line"></div><div class="line">    public HeroSpiderManCommand(HeroSpiderMan heroSpiderMan) &#123;</div><div class="line">        this.heroSpiderMan=heroSpiderMan;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void undo() &#123;</div><div class="line">        heroSpiderMan.attackUndoA();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void execute() &#123;</div><div class="line">        heroSpiderMan.attackC();</div><div class="line">        heroSpiderMan.attackD();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class MacroCommand implements Command&#123;</div><div class="line"></div><div class="line">    private Command[] commands;</div><div class="line"></div><div class="line">    public MacroCommand(Command[] commands)&#123;</div><div class="line">        this.commands = commands;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void execute() &#123;</div><div class="line">        for(Command c : commands)&#123;</div><div class="line">            c.execute();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void undo() &#123;</div><div class="line">        for(Command c : commands)&#123;</div><div class="line">            c.undo();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 控制器 总控</div><div class="line"> * 请求的对象</div><div class="line"> * 调用者可以接受命令当作参数,甚至在运行时动态地执行</div><div class="line"> * **/</div><div class="line">class RemoteControl&#123;</div><div class="line"></div><div class="line">    private Command[] buttonCommand;</div><div class="line"></div><div class="line">    //撤销命令</div><div class="line">    private Command undoCommand;</div><div class="line"></div><div class="line">    public RemoteControl(int slot)&#123;</div><div class="line"></div><div class="line">        buttonCommand  = new Command[slot];</div><div class="line">        NoCommand noCommand = new NoCommand();</div><div class="line">        for(int i=0;i&lt;slot;i++)&#123;</div><div class="line">            //避免出现null异常</div><div class="line">            buttonCommand[i] =noCommand;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setCommand(int slot,Command command)&#123;</div><div class="line">        buttonCommand[slot]=command;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //按钮按下事件</div><div class="line">    public void buttonWasPressed(int slot)&#123;</div><div class="line">        buttonCommand[slot].execute();</div><div class="line">        undoCommand= buttonCommand[slot];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //取消事件</div><div class="line">    public void undoButtonWasPressed()&#123;</div><div class="line">        undoCommand.undo();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">/***Complex Demo   END************************************************************************************/</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/zccccccc/2017/03/10/设计模式命令模式-不解释/" data-id="cj1yap0qo000i045rqnv5yesu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/设计模式/" style="font-size: 20px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/26/设计模式-状态模式/">设计模式-状态模式</a>
          </li>
        
          <li>
            <a href="/2017/03/29/设计模式迭代器－不解释/">设计模式迭代器－不解释</a>
          </li>
        
          <li>
            <a href="/2017/03/29/设计模式组合－不解释/">设计模式组合－不解释</a>
          </li>
        
          <li>
            <a href="/2017/03/29/设计模式模版方法－不解释/">设计模式模版方法－不解释</a>
          </li>
        
          <li>
            <a href="/2017/03/22/AES-加密MD5签名/">AES 加密MD5签名</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 张超<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>